<!-- doctor-list.component.html -->
<div class="container-fluid">
  <!-- ๐ ุดุฑูุท ุงูุจุญุซ ุงูุฑุฆูุณู -->
  <div class="search-header">
    <h2 class="search-title">ุงุจุญุซ ุนู ุฏูุชูุฑู ุงูููุงุณุจ</h2>
    <div class="search-form">
      <div class="search-input-group">
        <input type="text" class="search-input" placeholder="ุฃูุง ุฃุจุญุซ ุนู ุฏูุชูุฑ..." [(ngModel)]="filters.name"
          (input)="onFilterChange()">
        <i class="fas fa-search search-icon"></i>
      </div>

      <div class="search-filters">
        <select class="filter-select" [(ngModel)]="filters.specializationId" (change)="onFilterChange()">
          <option value="">ุงุฎุชุฑ ุงูุชุฎุตุต</option>
          @for (spec of specializations; track spec.id) {
          <option [value]="spec.id">{{ spec.name }}</option>
          }
        </select>

        <!--  ูููุญุงูุธุฉ -->
        <select class="filter-select" [(ngModel)]="filters.city" (change)="onFilterChange()">
          <option value="">ุงุฎุชุฑ ุงููุญุงูุธุฉ</option>
          @for (city of cities; track city) {
          <option [value]="city">{{ city }}</option>
          }
        </select>

        <input type="text" class="filter-input" placeholder="ุงูููุทูุฉ" [(ngModel)]="filters.street"
          (input)="onFilterChange()">

        <button class="search-btn" (click)="getDoctors()">
          <i class="fas fa-search"></i> ุจุญุซ
        </button>
      </div>
    </div>
  </div>

  <!-- ๐ ุฅุญุตุงุฆูุงุช ุงูุจุญุซ -->


  <div class="row">
    <!-- ๐งญ ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ -->
    <div class="col-md-3 sidebar">
      <div class="filter-section">
        <h4 class="filter-title"><i class="fas fa-filter"></i>ุญุฏุฏ ุจุญุซู</h4>

        <div class="filter-group">
          <label>ุงูููุน</label>
          <select class="form-control" [(ngModel)]="filters.gender" (change)="onFilterChange()">
            <option value="">ุงููู</option>
            <option value="0">ุฐูุฑ</option>
            <option value="1">ุฃูุซู</option>
          </select>
        </div>

        <div class="filter-group">
          <label>ูุทุงู ุงูุณุนุฑ (ุฌููู)</label>
          <div class="price-range">
            <input type="number" class="form-control" placeholder="ุงูุญุฏ ุงูุฃุฏูู" [(ngModel)]="filters.minPrice"
              (input)="onFilterChange()">
            <span>ุฅูู</span>
            <input type="number" class="form-control" placeholder="ุงูุญุฏ ุงูุฃูุตู" [(ngModel)]="filters.maxPrice"
              (input)="onFilterChange()">
          </div>
        </div>


      </div>
    </div>

    <!-- ๐งโโ๏ธ ูุงุฆูุฉ ุงูุฃุทุจุงุก -->
    <div class="col-md-9 doctors-list">
      <!-- <div class="doctors-header">
        <h3><i class="fas fa-user-md"></i> ูู ุงูุชุฎุตุตุงุช ({{ doctors.length }} ุฏูุชูุฑ)</h3>
        <div class="sort-options">
          <select class="sort-select">
            <option>ุงูุฃูุซุฑ ุชุทุงุจูุงู</option>
            <option>ุงูุฃุนูู ุชููููุงู</option>
            <option>ุงูุฃูู ุณุนุฑุงู</option>
          </select>
        </div>
      </div> -->

      <!-- ุจุทุงูุงุช ุงูุฃุทุจุงุก -->
      @for (doctor of doctors; track doctor.id) {
      <div class="doctor-card">
        <div class="doctor-image">
          <img [src]="doctor.imageUrl" alt="{{ doctor.name }}">

        </div>

        <div class="doctor-info">
          <h4 class="doctor-name">ุฏูุชูุฑ {{ doctor.name }}</h4>
          <p class="doctor-specialty">{{ doctor.specialization }}</p>
  

          <div class="doctor-meta">
            <div class="meta-item">
              <i class="fas fa-map-marker-alt"></i>
              <span>{{ doctor.city }} - {{ doctor.street }}</span>
            </div>

          </div>

          <div class="doctor-pricing">
            <div class="price">
              <span class="price-value">{{ doctor.bookingPrice }} ุฌููู</span>
              <span class="price-label">ุณุนุฑ ุงููุดู</span>
            </div>
            <button class="book-btn">ุญุฌุฒ ููุนุฏ</button>
          </div>
        </div>
      </div>
      }

      <!-- ุงูุชุฑููู ุงูุตูุญู -->
      @if (totalPages > 1) {
      <div class="pagination">
        <button class="page-btn" [disabled]="filters.pageNumber === 1" (click)="changePage(filters.pageNumber - 1)">
          <i class="fas fa-chevron-right"></i>
        </button>

        @for (page of pages; track page) {
        <button class="page-btn" [class.active]="filters.pageNumber === page" (click)="changePage(page)">
          {{ page }}
        </button>
        }

        <button class="page-btn" [disabled]="filters.pageNumber === totalPages"
          (click)="changePage(filters.pageNumber + 1)">
          <i class="fas fa-chevron-left"></i>
        </button>
      </div>
      }
    </div>
  </div>
</div>